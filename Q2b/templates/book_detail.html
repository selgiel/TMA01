{% extends "base.html" %}
{% block content %}

<div class="details-card">
  <img class="details-cover" src="{{ book.url }}" alt="{{ book.title }}">
  <div class="details-body">
    <div class="details-title">{{ book.title }}</div>
    <div class="details-authors">
      By
      {% if book.author %}{{ book.author }}
      {% else %}{{ ", ".join(book.authors) }}{% endif %}
      {% if book.illustrator %}, {{ book.illustrator }} (Illustrator){% endif %}
    </div>

    <div class="details-meta">
      Category:
      {% if book.categories %}{{ ", ".join(book.categories) }}
      {% else %}{{ book.category }}{% endif %}<br>
      Pages: {{ book.pages }}<br>
      {% if book.available is not none %}
        Copies: <b>{{ book.copies }}</b> Available: <b>{{ book.available }}</b>
      {% else %}
        Copies: <b>{{ book.copies }}</b>
      {% endif %}
    </div>

    {% for p in book.description %}
      <p class="details-desc">{{ p }}</p>
    {% endfor %}

    <!-- book_detail.html -->
    <div class="d-flex justify-content-end gap-2">
      <a href="{{ url_for('catalogue_bp.book_titles') }}" class="btn btn-success">Back to Book Titles</a>
      {% if (book.available | int) > 0 %}
        <form method="post" action="{{ url_for('catalogue_bp.make_loan', book_id=book._id|string) }}">
          <button class="btn btn-success" type="submit">Make a Loan</button>
        </form>
      {% else %}
        <span class="btn btn-danger same-btn" aria-disabled="true">Not Available</span>
      {% endif %}
    </div>

  </div>
</div>

{% endblock %}
